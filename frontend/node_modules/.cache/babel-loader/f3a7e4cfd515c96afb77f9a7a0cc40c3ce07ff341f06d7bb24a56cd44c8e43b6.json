{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\awnma\\\\Desktop\\\\Smart Portal\\\\frontend\\\\src\\\\app.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$(),\n  _s8 = $RefreshSig$();\n// File: frontend/src/App.jsx\n// This is the COMPLETE, FINALIZED file with Lecture Scheduling and PIN Attendance.\n\nimport React, { createContext, useState, useContext, useEffect, useCallback } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate, Link, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { jwtDecode } from 'jwt-decode';\n\n// --- 1. API Setup (Axios) ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst api = axios.create({\n  baseURL: 'http://127.0.0.1:8000/api/'\n});\n\n// --- 2. Auth Context & Hooks ---\nconst AuthContext = /*#__PURE__*/createContext();\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [authTokens, setAuthTokens] = useState(() => localStorage.getItem('authTokens') ? JSON.parse(localStorage.getItem('authTokens')) : null);\n  const [user, setUser] = useState(() => localStorage.getItem('authTokens') ? jwtDecode(JSON.parse(localStorage.getItem('authTokens')).access) : null);\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const logoutUser = useCallback(() => {\n    setAuthTokens(null);\n    setUser(null);\n    localStorage.removeItem('authTokens');\n    navigate('/auth');\n  }, [navigate]);\n  const loginUser = async (email, password) => {\n    setLoading(true);\n    try {\n      const response = await api.post('/login/', {\n        email,\n        password\n      });\n      if (response.status === 200) {\n        const data = response.data;\n        setAuthTokens(data);\n        const decodedUser = jwtDecode(data.access);\n        setUser(decodedUser);\n        localStorage.setItem('authTokens', JSON.stringify(data));\n        navigate('/courses');\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Login failed:', error);\n      const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || 'Login failed. Please check your credentials.';\n      alert(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const registerUser = async userData => {\n    setLoading(true);\n    try {\n      await api.post('/register/', userData);\n      await loginUser(userData.email, userData.password);\n    } catch (err) {\n      var _err$response;\n      console.error('Registration failed:', err);\n      const errorData = (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data;\n      let errorMessage = 'Registration failed.';\n      if (errorData) {\n        var _errorData$email;\n        errorMessage = ((_errorData$email = errorData.email) === null || _errorData$email === void 0 ? void 0 : _errorData$email[0]) || errorData.detail || errorMessage;\n      }\n      alert(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (authTokens) {\n      api.defaults.headers.common['Authorization'] = 'Bearer ' + authTokens.access;\n    } else {\n      delete api.defaults.headers.common['Authorization'];\n    }\n    const checkTokenExpiry = () => {\n      if (authTokens) {\n        const decodedToken = jwtDecode(authTokens.access);\n        if (decodedToken.exp * 1000 < Date.now()) {\n          logoutUser();\n        }\n      }\n    };\n    checkTokenExpiry();\n  }, [authTokens, logoutUser]);\n  const contextData = {\n    user,\n    authTokens,\n    loginUser,\n    registerUser,\n    logoutUser,\n    api,\n    loading,\n    setLoading\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: contextData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 9\n  }, this);\n};\n_s(AuthProvider, \"LcMKBb2OYX7YjXodJiTTBUHPtIM=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  return useContext(AuthContext);\n};\n\n// --- 3. Protected Route Component ---\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst ProtectedRoute = ({\n  children,\n  roles\n}) => {\n  _s3();\n  const {\n    user\n  } = useAuth();\n  if (!user) return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/auth\",\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 23\n  }, this);\n  if (roles && !roles.includes(user.role)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/courses\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 16\n    }, this);\n  }\n  return children;\n};\n\n// --- 4. Main Layout ---\n_s3(ProtectedRoute, \"9ep4vdl3mBfipxjmc+tQCDhw6Ik=\", false, function () {\n  return [useAuth];\n});\n_c2 = ProtectedRoute;\nconst MainLayout = ({\n  children\n}) => {\n  _s4();\n  const {\n    user,\n    logoutUser\n  } = useAuth();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 font-inter\",\n    children: [user && /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"bg-white shadow-md\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between h-16\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: \"/courses\",\n              className: \"flex-shrink-0 flex items-center font-bold text-indigo-600 rounded-lg p-2 transition duration-150 ease-in-out hover:bg-indigo-50\",\n              children: \"Smart Portal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"hidden sm:ml-6 sm:flex sm:space-x-4\",\n              children: [/*#__PURE__*/_jsxDEV(NavLink, {\n                to: \"/courses\",\n                children: \"Courses\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 37\n              }, this), user.role === 'STUDENT' && /*#__PURE__*/_jsxDEV(NavLink, {\n                to: \"/my-enrollments\",\n                children: \"My Enrollments\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 41\n              }, this), user.role === 'ADMIN' && /*#__PURE__*/_jsxDEV(NavLink, {\n                to: \"/manage-departments\",\n                children: \"Departments\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 41\n              }, this), (user.role === 'ADMIN' || user.role === 'LECTURER') && /*#__PURE__*/_jsxDEV(NavLink, {\n                to: \"/schedule-lectures\",\n                children: \"Schedule\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n                to: \"/profile\",\n                children: \"Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-gray-700 mr-4 hidden sm:inline\",\n              children: [\"Welcome, **\", user.first_name || user.email, \"** (\", user.role, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: logoutUser,\n              className: \"px-4 py-2 rounded-lg text-sm font-medium text-white bg-red-500 hover:bg-red-600 transition duration-150 shadow-md\",\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"py-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto sm:px-6 lg:px-8\",\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 9\n  }, this);\n};\n_s4(MainLayout, \"IUfdTV8cFv44EVyIoMYT7TaRFhg=\", false, function () {\n  return [useAuth];\n});\n_c3 = MainLayout;\nconst NavLink = ({\n  to,\n  children\n}) => /*#__PURE__*/_jsxDEV(Link, {\n  to: to,\n  className: \"inline-flex items-center px-3 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-600 hover:border-indigo-500 hover:text-indigo-600 transition duration-150\",\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 182,\n  columnNumber: 5\n}, this);\n\n// --- 5. Reusable Form Field Components ---\n_c4 = NavLink;\nconst InputField = ({\n  label,\n  name,\n  type = \"text\",\n  value,\n  onChange,\n  required = false,\n  step,\n  placeholder\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n    className: \"block text-sm font-medium text-gray-700\",\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n    type: type,\n    name: name,\n    value: value,\n    onChange: onChange,\n    required: required,\n    step: step,\n    placeholder: placeholder,\n    className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 192,\n  columnNumber: 5\n}, this);\n_c5 = InputField;\nconst TextAreaField = ({\n  label,\n  name,\n  value,\n  onChange,\n  rows,\n  required = false,\n  placeholder\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n    className: \"block text-sm font-medium text-gray-700\",\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n    name: name,\n    value: value,\n    onChange: onChange,\n    rows: rows,\n    required: required,\n    placeholder: placeholder,\n    className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 208,\n  columnNumber: 5\n}, this);\n_c6 = TextAreaField;\nconst SelectField = ({\n  label,\n  name,\n  value,\n  onChange,\n  options,\n  isUser = false,\n  required = false,\n  disabled = false\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n    className: \"block text-sm font-medium text-gray-700\",\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n    name: name,\n    value: value,\n    onChange: onChange,\n    required: required,\n    disabled: disabled,\n    className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white disabled:bg-gray-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n      value: \"\",\n      children: \"--- Select ---\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }, this), options.map(opt => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: opt.id,\n      children: isUser ? `${opt.first_name} ${opt.last_name} (${opt.email})` : `${opt.name} (${opt.code})`\n    }, opt.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 223,\n  columnNumber: 5\n}, this);\n_c7 = SelectField;\nconst InfoChip = ({\n  label,\n  value\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"bg-gray-100 p-4 rounded-lg\",\n  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-sm text-gray-500\",\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 245,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-lg font-semibold text-gray-900\",\n    children: value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 246,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 244,\n  columnNumber: 5\n}, this);\n_c8 = InfoChip;\nconst ProfileItem = ({\n  label,\n  value\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex justify-between items-center border-b pb-2\",\n  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"text-sm font-medium text-gray-500\",\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 252,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"text-base text-gray-800 font-medium\",\n    children: value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 253,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 251,\n  columnNumber: 5\n}, this);\n\n// --- 6. Core Pages / Functional Components (Defined before App) ---\n\n// --- Auth Page (Existing) ---\n_c9 = ProfileItem;\nconst AuthPage = () => {/* ... AuthPage logic remains the same ... */};\n\n// --- Profile Page (Existing) ---\n_c0 = AuthPage;\nconst ProfilePage = () => {/* ... ProfilePage logic remains the same ... */};\n\n// --- Course List Page (Existing) ---\n_c1 = ProfilePage;\nconst CoursesListPage = () => {/* ... CoursesListPage logic remains the same ... */};\n\n// --- Course Card (for List Page) ---\n_c10 = CoursesListPage;\nconst CourseCard = ({\n  course\n}) => {/* ... CourseCard logic remains the same ... */};\n\n// --- Course Detail Page (UPDATED FOR LECTURES) ---\n_c11 = CourseCard;\nconst CourseDetailPage = () => {\n  _s5();\n  var _course$instructor;\n  const {\n    user,\n    api,\n    loading,\n    setLoading\n  } = useAuth();\n  const [course, setCourse] = useState(null);\n  const [lectures, setLectures] = useState([]);\n  const [attendancePin, setAttendancePin] = useState(''); // State for PIN input\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n\n  // Fetch Course details and scheduled lectures\n  useEffect(() => {\n    setLoading(true);\n    // Fetch course details\n    const coursePromise = api.get(`/courses/${id}/`);\n    // Fetch lectures for this course\n    const lecturePromise = api.get(`/lectures/?course=${id}`);\n    Promise.all([coursePromise, lecturePromise]).then(([courseRes, lectureRes]) => {\n      setCourse(courseRes.data);\n      setLectures(lectureRes.data.results || lectureRes.data); // Handle pagination\n    }).catch(err => console.error(err)).finally(() => setLoading(false));\n  }, [id, api, setLoading]);\n  const handleEnroll = async () => {/* ... handleEnroll logic remains the same ... */};\n\n  // --- UPDATED: Handle Mark Attendance (Requires Lecture ID and PIN/Location) ---\n  const handleMarkAttendance = async lectureId => {\n    if (loading) return;\n    const isPinMode = !!attendancePin || user.role === 'ADMIN' && user.master_pin; // Check if PIN is entered or user is Admin with Master PIN\n\n    setLoading(true);\n    const markAttendanceRequest = async (latitude = null, longitude = null) => {\n      try {\n        const payload = {\n          lecture: lectureId,\n          latitude: latitude,\n          longitude: longitude,\n          attendance_pin: attendancePin || (user.role === 'ADMIN' ? user.master_pin : null) // Send student PIN or Admin Master PIN\n        };\n        // Remove null geo fields if using PIN\n        if (isPinMode) {\n          delete payload.latitude;\n          delete payload.longitude;\n        }\n        await api.post('/attendance/mark/', payload);\n        alert('Attendance marked successfully! You are Present.');\n      } catch (err) {\n        var _err$response2, _err$response2$data;\n        const message = ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.detail) || 'Attendance failed (Location/PIN/Duplicate/Time).';\n        alert(message);\n      } finally {\n        setLoading(false);\n        setAttendancePin(''); // Clear PIN input\n      }\n    };\n    if (isPinMode) {\n      // If PIN is provided (or Master PIN), mark attendance directly\n      await markAttendanceRequest();\n    } else {\n      // If no PIN, use Geolocation\n      if (!navigator.geolocation) {\n        setLoading(false);\n        return alert(\"Geolocation is not supported by your browser for attendance.\");\n      }\n      navigator.geolocation.getCurrentPosition(position => markAttendanceRequest(position.coords.latitude, position.coords.longitude), () => {\n        setLoading(false);\n        alert(\"Could not get your location. Attendance failed.\");\n      });\n    }\n  };\n  if (loading && !course) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading course details...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 352,\n    columnNumber: 36\n  }, this);\n  if (!course) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Course not found.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 353,\n    columnNumber: 25\n  }, this);\n  const isInstructorOwner = user.role === 'LECTURER' && ((_course$instructor = course.instructor) === null || _course$instructor === void 0 ? void 0 : _course$instructor.id) === user.user_id;\n  const isAdmin = user.role === 'ADMIN';\n  const isStudent = user.role === 'STUDENT';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-8 rounded-xl shadow-2xl space-y-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-base font-semibold text-indigo-600\",\n        children: course.code\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-4xl font-extrabold text-gray-900 mt-1\",\n        children: course.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-700 text-lg mt-4\",\n        children: course.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-3 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(InfoChip, {\n        label: \"Department\",\n        value: course.department.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InfoChip, {\n        label: \"Credits\",\n        value: course.credits\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InfoChip, {\n        label: \"Instructor\",\n        value: course.instructor ? `${course.instructor.first_name} ${course.instructor.last_name}` : 'TBD'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-t pt-6 flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-2xl font-bold text-gray-900\",\n          children: [course.seats_left, \" / \", course.capacity]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: \"Seats Remaining\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 17\n      }, this), isStudent && !course.is_full && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleEnroll,\n        disabled: loading,\n        className: \"px-6 py-3 bg-green-600 text-white rounded-lg shadow-lg text-lg font-semibold hover:bg-green-700 disabled:bg-gray-400\",\n        children: loading ? 'Processing...' : 'Enroll Now'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 21\n      }, this), (isAdmin || isInstructorOwner) && /*#__PURE__*/_jsxDEV(Link, {\n        to: `/courses/${id}/schedule`,\n        className: \"px-6 py-3 bg-purple-600 text-white rounded-lg shadow-lg text-lg font-semibold hover:bg-purple-700\",\n        children: \"Schedule Lectures\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 13\n    }, this), isStudent && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-t pt-6 space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-gray-800\",\n        children: \"Upcoming Lectures\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 22\n      }, this), lectures.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No lectures scheduled yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 48\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: attendancePin,\n          onChange: e => setAttendancePin(e.target.value),\n          placeholder: \"Enter Attendance PIN (or use location)\",\n          className: \"w-full md:w-1/2 p-2 border border-gray-300 rounded-lg mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 25\n        }, this), lectures.map(lecture => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border rounded-lg bg-gray-50 flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold\",\n              children: [lecture.scheduled_date, \" at \", lecture.start_time.substring(0, 5), \" - \", lecture.end_time.substring(0, 5)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 38\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Location: Lat \", lecture.location_lat, \", Lon \", lecture.location_lon]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 34\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleMarkAttendance(lecture.id),\n            disabled: loading,\n            className: \"px-4 py-2 bg-indigo-600 text-white rounded-lg shadow hover:bg-indigo-700 disabled:bg-gray-400\",\n            children: loading ? 'Processing...' : 'Mark Attendance'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 34\n          }, this)]\n        }, lecture.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 30\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 18\n    }, this), (isAdmin || isInstructorOwner) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-t pt-6 flex space-x-4\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/courses/${id}/manage`,\n        className: \"px-6 py-3 bg-blue-600 text-white rounded-lg shadow-lg text-lg font-semibold hover:bg-blue-700\",\n        children: \"Manage Enrollments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: `/attendance/reports/${id}`,\n        className: \"px-6 py-3 bg-teal-600 text-white rounded-lg shadow-lg text-lg font-semibold hover:bg-teal-700\",\n        children: \"View Attendance Report\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 18\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 360,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Student \"My Enrollments\" Page (Existing) ---\n_s5(CourseDetailPage, \"C4JZtwFTpPviZuVDXr/pXCcN3Tw=\", false, function () {\n  return [useAuth, useParams, useNavigate];\n});\n_c12 = CourseDetailPage;\nconst MyEnrollmentsPage = () => {/* ... MyEnrollmentsPage logic remains the same ... */};\n\n// --- Instructor Manage Enrollments Page (Existing) ---\n_c13 = MyEnrollmentsPage;\nconst ManageEnrollmentsPage = () => {/* ... ManageEnrollmentsPage logic remains the same ... */};\n\n// --- Admin Manage Departments Page (CRUD) ---\n_c14 = ManageEnrollmentsPage;\nconst ManageDepartmentsPage = () => {/* ... ManageDepartmentsPage logic remains the same ... */};\n\n// --- Create/Edit Course Page (Finalized) ---\n_c15 = ManageDepartmentsPage;\nconst CreateEditCoursePage = () => {/* ... CreateEditCoursePage logic remains the same ... */};\n\n// --- NEW: Lecture Schedule Page (Admin/Instructor) ---\n_c16 = CreateEditCoursePage;\nconst LectureSchedulePage = () => {\n  _s6();\n  const {\n    user,\n    api,\n    loading,\n    setLoading\n  } = useAuth();\n  const navigate = useNavigate();\n  const [courses, setCourses] = useState([]); // Courses taught by this instructor or all for admin\n  const [selectedCourseId, setSelectedCourseId] = useState('');\n  const [lectures, setLectures] = useState([]);\n  const [formData, setFormData] = useState({\n    course: '',\n    scheduled_date: '',\n    start_time: '',\n    end_time: '',\n    location_lat: '',\n    location_lon: '',\n    attendance_radius: 100\n  });\n  const [currentPin, setCurrentPin] = useState(null); // To display generated PIN\n\n  // Fetch courses based on role\n  useEffect(() => {\n    setLoading(true);\n    const url = user.role === 'ADMIN' ? '/courses/' : '/courses/?instructor=' + user.user_id;\n    api.get(url).then(res => {\n      const courseData = res.data.results || res.data;\n      setCourses(courseData);\n      if (courseData.length > 0) {\n        setSelectedCourseId(courseData[0].id); // Select first course by default\n      }\n    }).catch(err => alert(\"Failed to load courses.\")).finally(() => setLoading(false));\n  }, [api, setLoading, user]);\n\n  // Fetch lectures when selected course changes\n  useEffect(() => {\n    if (!selectedCourseId) return;\n    setLoading(true);\n    api.get(`/lectures/?course=${selectedCourseId}`).then(res => setLectures(res.data.results || res.data)).catch(err => alert(\"Failed to load lectures for this course.\")).finally(() => setLoading(false));\n  }, [selectedCourseId, api, setLoading]);\n  const handleFormChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // Handle lecture creation\n  const handleCreateLecture = async e => {\n    e.preventDefault();\n    setLoading(true);\n    const payload = {\n      ...formData,\n      course: selectedCourseId\n    };\n    try {\n      await api.post('/lectures/', payload);\n      alert('Lecture scheduled successfully!');\n      // Refresh lectures for the selected course\n      const res = await api.get(`/lectures/?course=${selectedCourseId}`);\n      setLectures(res.data.results || res.data);\n      // Reset form\n      setFormData({\n        course: '',\n        scheduled_date: '',\n        start_time: '',\n        end_time: '',\n        location_lat: '',\n        location_lon: '',\n        attendance_radius: 100\n      });\n    } catch (err) {\n      var _err$response3;\n      console.error((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.data);\n      alert(\"Failed to schedule lecture.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Generate PIN for a specific lecture\n  const handleGeneratePin = async lectureId => {\n    setLoading(true);\n    setCurrentPin('Generating...');\n    try {\n      const res = await api.post(`/lectures/${lectureId}/generate_pin/`);\n      setCurrentPin(res.data.pin);\n    } catch (err) {\n      setCurrentPin('Error');\n      alert(\"Failed to generate PIN.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold text-gray-900\",\n      children: \"Schedule Lectures\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-4 rounded-lg shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm font-medium text-gray-700 mb-1\",\n        children: \"Select Course to Manage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedCourseId,\n        onChange: e => setSelectedCourseId(e.target.value),\n        className: \"w-full p-2 border border-gray-300 rounded-lg bg-white\",\n        disabled: loading,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Select Course --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 22\n        }, this), courses.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: c.id,\n          children: [c.code, \" - \", c.name]\n        }, c.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 40\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 13\n    }, this), selectedCourseId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-xl shadow-lg border border-indigo-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold mb-4\",\n        children: \"Add New Lecture\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCreateLecture,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(InputField, {\n            label: \"Date\",\n            name: \"scheduled_date\",\n            type: \"date\",\n            value: formData.scheduled_date,\n            onChange: handleFormChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(InputField, {\n            label: \"Start Time\",\n            name: \"start_time\",\n            type: \"time\",\n            value: formData.start_time,\n            onChange: handleFormChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(InputField, {\n            label: \"End Time\",\n            name: \"end_time\",\n            type: \"time\",\n            value: formData.end_time,\n            onChange: handleFormChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(InputField, {\n            label: \"Latitude\",\n            name: \"location_lat\",\n            type: \"number\",\n            step: \"any\",\n            value: formData.location_lat,\n            onChange: handleFormChange,\n            placeholder: \"e.g., 34.0522\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(InputField, {\n            label: \"Longitude\",\n            name: \"location_lon\",\n            type: \"number\",\n            step: \"any\",\n            value: formData.location_lon,\n            onChange: handleFormChange,\n            placeholder: \"e.g., -118.2437\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(InputField, {\n            label: \"Radius (Meters)\",\n            name: \"attendance_radius\",\n            type: \"number\",\n            value: formData.attendance_radius,\n            onChange: handleFormChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading,\n          className: \"w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400\",\n          children: loading ? 'Scheduling...' : 'Schedule Lecture'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 569,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-xl shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold mb-4\",\n        children: \"Scheduled Lectures for Selected Course\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 17\n      }, this), loading && lectures.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading lectures...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 55\n      }, this), !loading && lectures.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No lectures scheduled for this course yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 56\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: lectures.map(lec => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border rounded-lg bg-gray-50 flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold\",\n              children: [lec.scheduled_date, \" | \", lec.start_time.substring(0, 5), \" - \", lec.end_time.substring(0, 5)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 598,\n              columnNumber: 34\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"PIN: \", lec.attendance_pin || 'Not Generated', \" (\", lec.is_pin_active ? 'Active' : 'Expired', \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 599,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [currentPin && lec.id === parseInt(currentPin.split('-')[1]) &&\n            /*#__PURE__*/\n            // Simple check\n            _jsxDEV(\"span\", {\n              className: \"font-mono text-lg font-bold mr-4\",\n              children: currentPin.split('-')[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleGeneratePin(lec.id),\n              className: \"px-3 py-1 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600\",\n              disabled: loading,\n              children: \"Generate/Show PIN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 30\n          }, this)]\n        }, lec.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 26\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 550,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Attendance Report Page ---\n_s6(LectureSchedulePage, \"IbIVThgU479YQWEFNE6pGN57bC0=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c17 = LectureSchedulePage;\nconst AttendanceReportPage = () => {\n  _s7();\n  const {\n    api,\n    loading,\n    setLoading\n  } = useAuth();\n  const [report, setReport] = useState(null);\n  const {\n    id\n  } = useParams(); // Course ID from URL\n\n  useEffect(() => {\n    setLoading(true);\n    api.get(`/attendance/reports/course/${id}/`).then(res => setReport(res.data)).catch(err => alert(\"Failed to fetch attendance report.\")).finally(() => setLoading(false));\n  }, [id, api, setLoading]);\n  if (loading || !report) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Generating attendance report...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 638,\n    columnNumber: 36\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-8 rounded-xl shadow-2xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold text-gray-900 mb-2\",\n      children: [\"Attendance Report: \", report.course_code]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 642,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xl font-semibold text-indigo-600 mb-6\",\n      children: [\"Total Sessions Tracked: \", report.total_sessions_tracked]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"min-w-full divide-y divide-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n            children: \"Student Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 648,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n            children: \"Present\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 649,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n            children: \"Absent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n            children: \"Late\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 651,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n            children: \"Attendance %\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        className: \"bg-white divide-y divide-gray-200\",\n        children: report.student_summary.map((stat, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",\n            children: stat.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-semibold\",\n            children: stat.present\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-6 py-4 whitespace-nowrap text-sm text-red-600 font-semibold\",\n            children: stat.absent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-6 py-4 whitespace-nowrap text-sm text-yellow-600 font-semibold\",\n            children: stat.late\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-6 py-4 whitespace-nowrap text-sm font-bold text-indigo-700\",\n            children: stat.attendance_percentage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 662,\n            columnNumber: 29\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 655,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 645,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 641,\n    columnNumber: 9\n  }, this);\n};\n\n// --- 8. Main App Component (Routing) ---\n_s7(AttendanceReportPage, \"aPlqqwm5C3QKaLqMtfzj9huas9E=\", false, function () {\n  return [useAuth, useParams];\n});\n_c18 = AttendanceReportPage;\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n    children: /*#__PURE__*/_jsxDEV(AuthProvider, {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/auth\",\n          element: /*#__PURE__*/_jsxDEV(AuthPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 50\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 679,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/*\",\n          element: /*#__PURE__*/_jsxDEV(MainLayout, {\n            children: /*#__PURE__*/_jsxDEV(Routes, {\n              children: [/*#__PURE__*/_jsxDEV(Route, {\n                path: \"/courses\",\n                element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n                  children: /*#__PURE__*/_jsxDEV(CoursesListPage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 688,\n                    columnNumber: 85\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 688,\n                  columnNumber: 69\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 688,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/courses/new\",\n                element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n                  roles: ['ADMIN', 'LECTURER'],\n                  children: /*#__PURE__*/_jsxDEV(CreateEditCoursePage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 689,\n                    columnNumber: 119\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 689,\n                  columnNumber: 73\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 689,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/courses/:id\",\n                element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n                  children: /*#__PURE__*/_jsxDEV(CourseDetailPage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 690,\n                    columnNumber: 89\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 690,\n                  columnNumber: 73\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 690,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/courses/:id/manage\",\n                element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n                  roles: ['ADMIN', 'LECTURER'],\n                  children: /*#__PURE__*/_jsxDEV(ManageEnrollmentsPage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 691,\n                    columnNumber: 126\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 691,\n                  columnNumber: 80\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/my-enrollments\",\n                element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n                  roles: ['STUDENT'],\n                  children: /*#__PURE__*/_jsxDEV(MyEnrollmentsPage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 692,\n                    columnNumber: 112\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 692,\n                  columnNumber: 76\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 692,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/manage-departments\",\n                element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n                  roles: ['ADMIN'],\n                  children: /*#__PURE__*/_jsxDEV(ManageDepartmentsPage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 693,\n                    columnNumber: 114\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 693,\n                  columnNumber: 80\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 693,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/courses/:id/schedule\" // Added route for scheduling lectures for a specific course\n                ,\n                element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n                  roles: ['ADMIN', 'LECTURER'],\n                  children: /*#__PURE__*/_jsxDEV(LectureSchedulePage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 698,\n                    columnNumber: 96\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 698,\n                  columnNumber: 50\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 696,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/schedule-lectures\" // Generic schedule page link\n                ,\n                element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n                  roles: ['ADMIN', 'LECTURER'],\n                  children: /*#__PURE__*/_jsxDEV(LectureSchedulePage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 702,\n                    columnNumber: 96\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 702,\n                  columnNumber: 50\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 700,\n                columnNumber: 38\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/attendance/reports/:id\",\n                element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n                  roles: ['ADMIN', 'LECTURER'],\n                  children: /*#__PURE__*/_jsxDEV(AttendanceReportPage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 706,\n                    columnNumber: 96\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 706,\n                  columnNumber: 50\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 704,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/profile\",\n                element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n                  children: /*#__PURE__*/_jsxDEV(ProfilePage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 710,\n                    columnNumber: 85\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 710,\n                  columnNumber: 69\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 710,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/\",\n                element: /*#__PURE__*/_jsxDEV(HomeRedirect, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 713,\n                  columnNumber: 62\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 713,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"*\",\n                element: /*#__PURE__*/_jsxDEV(Navigate, {\n                  to: \"/courses\",\n                  replace: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 715,\n                  columnNumber: 62\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 715,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 686,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 677,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 675,\n    columnNumber: 9\n  }, this);\n}\n\n// Helper component to redirect logged-in users\n_c19 = App;\nconst HomeRedirect = () => {\n  _s8();\n  const {\n    user\n  } = useAuth();\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/auth\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 730,\n      columnNumber: 16\n    }, this);\n  }\n  // All roles default to the courses page\n  return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/courses\",\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 733,\n    columnNumber: 12\n  }, this);\n};\n_s8(HomeRedirect, \"9ep4vdl3mBfipxjmc+tQCDhw6Ik=\", false, function () {\n  return [useAuth];\n});\n_c20 = HomeRedirect;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20;\n$RefreshReg$(_c, \"AuthProvider\");\n$RefreshReg$(_c2, \"ProtectedRoute\");\n$RefreshReg$(_c3, \"MainLayout\");\n$RefreshReg$(_c4, \"NavLink\");\n$RefreshReg$(_c5, \"InputField\");\n$RefreshReg$(_c6, \"TextAreaField\");\n$RefreshReg$(_c7, \"SelectField\");\n$RefreshReg$(_c8, \"InfoChip\");\n$RefreshReg$(_c9, \"ProfileItem\");\n$RefreshReg$(_c0, \"AuthPage\");\n$RefreshReg$(_c1, \"ProfilePage\");\n$RefreshReg$(_c10, \"CoursesListPage\");\n$RefreshReg$(_c11, \"CourseCard\");\n$RefreshReg$(_c12, \"CourseDetailPage\");\n$RefreshReg$(_c13, \"MyEnrollmentsPage\");\n$RefreshReg$(_c14, \"ManageEnrollmentsPage\");\n$RefreshReg$(_c15, \"ManageDepartmentsPage\");\n$RefreshReg$(_c16, \"CreateEditCoursePage\");\n$RefreshReg$(_c17, \"LectureSchedulePage\");\n$RefreshReg$(_c18, \"AttendanceReportPage\");\n$RefreshReg$(_c19, \"App\");\n$RefreshReg$(_c20, \"HomeRedirect\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","useCallback","BrowserRouter","Routes","Route","Navigate","useNavigate","Link","useParams","axios","jwtDecode","jsxDEV","_jsxDEV","api","create","baseURL","AuthContext","AuthProvider","children","_s","authTokens","setAuthTokens","localStorage","getItem","JSON","parse","user","setUser","access","loading","setLoading","navigate","logoutUser","removeItem","loginUser","email","password","response","post","status","data","decodedUser","setItem","stringify","error","_error$response","_error$response$data","console","errorMessage","detail","alert","registerUser","userData","err","_err$response","errorData","_errorData$email","defaults","headers","common","checkTokenExpiry","decodedToken","exp","Date","now","contextData","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","ProtectedRoute","roles","_s3","to","replace","includes","role","_c2","MainLayout","_s4","className","NavLink","first_name","onClick","_c3","_c4","InputField","label","name","type","onChange","required","step","placeholder","_c5","TextAreaField","rows","_c6","SelectField","options","isUser","disabled","map","opt","id","last_name","code","_c7","InfoChip","_c8","ProfileItem","_c9","AuthPage","_c0","ProfilePage","_c1","CoursesListPage","_c10","CourseCard","course","_c11","CourseDetailPage","_s5","_course$instructor","setCourse","lectures","setLectures","attendancePin","setAttendancePin","coursePromise","get","lecturePromise","Promise","all","then","courseRes","lectureRes","results","catch","finally","handleEnroll","handleMarkAttendance","lectureId","isPinMode","master_pin","markAttendanceRequest","latitude","longitude","payload","lecture","attendance_pin","_err$response2","_err$response2$data","message","navigator","geolocation","getCurrentPosition","position","coords","isInstructorOwner","instructor","user_id","isAdmin","isStudent","description","department","credits","seats_left","capacity","is_full","length","e","target","scheduled_date","start_time","substring","end_time","location_lat","location_lon","_c12","MyEnrollmentsPage","_c13","ManageEnrollmentsPage","_c14","ManageDepartmentsPage","_c15","CreateEditCoursePage","_c16","LectureSchedulePage","_s6","courses","setCourses","selectedCourseId","setSelectedCourseId","formData","setFormData","attendance_radius","currentPin","setCurrentPin","url","res","courseData","handleFormChange","handleCreateLecture","preventDefault","_err$response3","handleGeneratePin","pin","c","onSubmit","lec","is_pin_active","parseInt","split","_c17","AttendanceReportPage","_s7","report","setReport","course_code","total_sessions_tracked","student_summary","stat","index","present","absent","late","attendance_percentage","_c18","App","path","element","HomeRedirect","_c19","_s8","_c20","$RefreshReg$"],"sources":["C:/Users/awnma/Desktop/Smart Portal/frontend/src/app.jsx"],"sourcesContent":["// File: frontend/src/App.jsx\r\n// This is the COMPLETE, FINALIZED file with Lecture Scheduling and PIN Attendance.\r\n\r\nimport React, { createContext, useState, useContext, useEffect, useCallback } from 'react';\r\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate, Link, useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { jwtDecode } from 'jwt-decode'; \r\n\r\n// --- 1. API Setup (Axios) ---\r\nconst api = axios.create({\r\n    baseURL: 'http://127.0.0.1:8000/api/',\r\n});\r\n\r\n// --- 2. Auth Context & Hooks ---\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [authTokens, setAuthTokens] = useState(() =>\r\n        localStorage.getItem('authTokens')\r\n            ? JSON.parse(localStorage.getItem('authTokens'))\r\n            : null\r\n    );\r\n    const [user, setUser] = useState(() =>\r\n        localStorage.getItem('authTokens')\r\n            ? jwtDecode(JSON.parse(localStorage.getItem('authTokens')).access)\r\n            : null\r\n    );\r\n    const [loading, setLoading] = useState(false);\r\n    \r\n    const navigate = useNavigate();\r\n\r\n    const logoutUser = useCallback(() => {\r\n        setAuthTokens(null);\r\n        setUser(null);\r\n        localStorage.removeItem('authTokens');\r\n        navigate('/auth');\r\n    }, [navigate]);\r\n\r\n    const loginUser = async (email, password) => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await api.post('/login/', { email, password });\r\n            if (response.status === 200) {\r\n                const data = response.data;\r\n                setAuthTokens(data);\r\n                const decodedUser = jwtDecode(data.access);\r\n                setUser(decodedUser);\r\n                localStorage.setItem('authTokens', JSON.stringify(data));\r\n                navigate('/courses');\r\n            }\r\n        } catch (error) {\r\n            console.error('Login failed:', error);\r\n            const errorMessage = error.response?.data?.detail || 'Login failed. Please check your credentials.';\r\n            alert(errorMessage);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const registerUser = async (userData) => {\r\n        setLoading(true);\r\n        try {\r\n            await api.post('/register/', userData);\r\n            await loginUser(userData.email, userData.password);\r\n        } catch (err) {\r\n            console.error('Registration failed:', err);\r\n            const errorData = err.response?.data;\r\n            let errorMessage = 'Registration failed.';\r\n            if (errorData) {\r\n                errorMessage = errorData.email?.[0] || errorData.detail || errorMessage;\r\n            }\r\n            alert(errorMessage);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (authTokens) {\r\n            api.defaults.headers.common['Authorization'] = 'Bearer ' + authTokens.access;\r\n        } else {\r\n            delete api.defaults.headers.common['Authorization'];\r\n        }\r\n        \r\n        const checkTokenExpiry = () => {\r\n            if (authTokens) {\r\n                const decodedToken = jwtDecode(authTokens.access);\r\n                if (decodedToken.exp * 1000 < Date.now()) {\r\n                    logoutUser();\r\n                }\r\n            }\r\n        };\r\n        checkTokenExpiry();\r\n        \r\n    }, [authTokens, logoutUser]);\r\n\r\n\r\n    const contextData = {\r\n        user,\r\n        authTokens,\r\n        loginUser,\r\n        registerUser,\r\n        logoutUser,\r\n        api, \r\n        loading,\r\n        setLoading,\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={contextData}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\n// --- 3. Protected Route Component ---\r\nconst ProtectedRoute = ({ children, roles }) => {\r\n    const { user } = useAuth();\r\n    if (!user) return <Navigate to=\"/auth\" replace />;\r\n    if (roles && !roles.includes(user.role)) {\r\n        return <Navigate to=\"/courses\" replace />;\r\n    }\r\n    return children;\r\n};\r\n\r\n// --- 4. Main Layout ---\r\nconst MainLayout = ({ children }) => {\r\n    const { user, logoutUser } = useAuth();\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-100 font-inter\">\r\n            {user && (\r\n                <nav className=\"bg-white shadow-md\">\r\n                    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                        <div className=\"flex justify-between h-16\">\r\n                            <div className=\"flex\">\r\n                                <Link to=\"/courses\" className=\"flex-shrink-0 flex items-center font-bold text-indigo-600 rounded-lg p-2 transition duration-150 ease-in-out hover:bg-indigo-50\">\r\n                                    Smart Portal\r\n                                </Link>\r\n                                <div className=\"hidden sm:ml-6 sm:flex sm:space-x-4\">\r\n                                    <NavLink to=\"/courses\">Courses</NavLink>\r\n                                    {user.role === 'STUDENT' && (\r\n                                        <NavLink to=\"/my-enrollments\">My Enrollments</NavLink>\r\n                                    )}\r\n                                    {user.role === 'ADMIN' && (\r\n                                        <NavLink to=\"/manage-departments\">Departments</NavLink>\r\n                                    )}\r\n                                    {/* Link for Instructors/Admins to schedule lectures */}\r\n                                    {(user.role === 'ADMIN' || user.role === 'LECTURER') && (\r\n                                        <NavLink to=\"/schedule-lectures\">Schedule</NavLink>\r\n                                    )}\r\n                                    <NavLink to=\"/profile\">Profile</NavLink>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex items-center\">\r\n                                <span className=\"text-sm text-gray-700 mr-4 hidden sm:inline\">\r\n                                    Welcome, **{user.first_name || user.email}** ({user.role})\r\n                                </span>\r\n                                <button\r\n                                    onClick={logoutUser}\r\n                                    className=\"px-4 py-2 rounded-lg text-sm font-medium text-white bg-red-500 hover:bg-red-600 transition duration-150 shadow-md\"\r\n                                >\r\n                                    Logout\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </nav>\r\n            )}\r\n            <main className=\"py-10\">\r\n                <div className=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\r\n                    {children}\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst NavLink = ({ to, children }) => (\r\n    <Link \r\n        to={to} \r\n        className=\"inline-flex items-center px-3 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-600 hover:border-indigo-500 hover:text-indigo-600 transition duration-150\"\r\n    >\r\n        {children}\r\n    </Link>\r\n);\r\n\r\n// --- 5. Reusable Form Field Components ---\r\nconst InputField = ({ label, name, type = \"text\", value, onChange, required = false, step, placeholder }) => (\r\n    <div>\r\n        <label className=\"block text-sm font-medium text-gray-700\">{label}</label>\r\n        <input \r\n            type={type} \r\n            name={name} \r\n            value={value} \r\n            onChange={onChange} \r\n            required={required} \r\n            step={step}\r\n            placeholder={placeholder}\r\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500\" \r\n        />\r\n    </div>\r\n);\r\n\r\nconst TextAreaField = ({ label, name, value, onChange, rows, required = false, placeholder }) => (\r\n    <div>\r\n        <label className=\"block text-sm font-medium text-gray-700\">{label}</label>\r\n        <textarea \r\n            name={name} \r\n            value={value} \r\n            onChange={onChange} \r\n            rows={rows}\r\n            required={required} \r\n            placeholder={placeholder}\r\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500\" \r\n        />\r\n    </div>\r\n);\r\n\r\nconst SelectField = ({ label, name, value, onChange, options, isUser = false, required = false, disabled = false }) => (\r\n    <div>\r\n        <label className=\"block text-sm font-medium text-gray-700\">{label}</label>\r\n        <select \r\n            name={name} \r\n            value={value} \r\n            onChange={onChange} \r\n            required={required} \r\n            disabled={disabled}\r\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white disabled:bg-gray-200\"\r\n        >\r\n            <option value=\"\">--- Select ---</option>\r\n            {options.map(opt => (\r\n                <option key={opt.id} value={opt.id}>\r\n                    {isUser ? `${opt.first_name} ${opt.last_name} (${opt.email})` : `${opt.name} (${opt.code})`}\r\n                </option>\r\n            ))}\r\n        </select>\r\n    </div>\r\n);\r\n\r\nconst InfoChip = ({ label, value }) => (\r\n    <div className=\"bg-gray-100 p-4 rounded-lg\">\r\n        <p className=\"text-sm text-gray-500\">{label}</p>\r\n        <p className=\"text-lg font-semibold text-gray-900\">{value}</p>\r\n    </div>\r\n);\r\n\r\nconst ProfileItem = ({ label, value }) => (\r\n    <div className=\"flex justify-between items-center border-b pb-2\">\r\n        <span className=\"text-sm font-medium text-gray-500\">{label}</span>\r\n        <span className=\"text-base text-gray-800 font-medium\">{value}</span>\r\n    </div>\r\n);\r\n\r\n\r\n// --- 6. Core Pages / Functional Components (Defined before App) ---\r\n\r\n// --- Auth Page (Existing) ---\r\nconst AuthPage = () => { /* ... AuthPage logic remains the same ... */ };\r\n\r\n// --- Profile Page (Existing) ---\r\nconst ProfilePage = () => { /* ... ProfilePage logic remains the same ... */ };\r\n\r\n// --- Course List Page (Existing) ---\r\nconst CoursesListPage = () => { /* ... CoursesListPage logic remains the same ... */ };\r\n\r\n// --- Course Card (for List Page) ---\r\nconst CourseCard = ({ course }) => { /* ... CourseCard logic remains the same ... */ };\r\n\r\n// --- Course Detail Page (UPDATED FOR LECTURES) ---\r\nconst CourseDetailPage = () => {\r\n    const { user, api, loading, setLoading } = useAuth();\r\n    const [course, setCourse] = useState(null);\r\n    const [lectures, setLectures] = useState([]);\r\n    const [attendancePin, setAttendancePin] = useState(''); // State for PIN input\r\n    const { id } = useParams(); \r\n    const navigate = useNavigate();\r\n\r\n    // Fetch Course details and scheduled lectures\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        // Fetch course details\r\n        const coursePromise = api.get(`/courses/${id}/`);\r\n        // Fetch lectures for this course\r\n        const lecturePromise = api.get(`/lectures/?course=${id}`); \r\n\r\n        Promise.all([coursePromise, lecturePromise])\r\n            .then(([courseRes, lectureRes]) => {\r\n                setCourse(courseRes.data);\r\n                setLectures(lectureRes.data.results || lectureRes.data); // Handle pagination\r\n            })\r\n            .catch(err => console.error(err))\r\n            .finally(() => setLoading(false));\r\n    }, [id, api, setLoading]);\r\n\r\n    const handleEnroll = async () => { /* ... handleEnroll logic remains the same ... */ };\r\n    \r\n    // --- UPDATED: Handle Mark Attendance (Requires Lecture ID and PIN/Location) ---\r\n    const handleMarkAttendance = async (lectureId) => {\r\n        if (loading) return;\r\n\r\n        const isPinMode = !!attendancePin || (user.role === 'ADMIN' && user.master_pin); // Check if PIN is entered or user is Admin with Master PIN\r\n        \r\n        setLoading(true);\r\n\r\n        const markAttendanceRequest = async (latitude = null, longitude = null) => {\r\n             try {\r\n                const payload = { \r\n                    lecture: lectureId, \r\n                    latitude: latitude, \r\n                    longitude: longitude,\r\n                    attendance_pin: attendancePin || (user.role === 'ADMIN' ? user.master_pin : null) // Send student PIN or Admin Master PIN\r\n                };\r\n                // Remove null geo fields if using PIN\r\n                if (isPinMode) {\r\n                    delete payload.latitude;\r\n                    delete payload.longitude;\r\n                }\r\n                \r\n                await api.post('/attendance/mark/', payload);\r\n                alert('Attendance marked successfully! You are Present.');\r\n            } catch (err) {\r\n                const message = err.response?.data?.detail || 'Attendance failed (Location/PIN/Duplicate/Time).';\r\n                alert(message);\r\n            } finally {\r\n                setLoading(false);\r\n                setAttendancePin(''); // Clear PIN input\r\n            }\r\n        };\r\n\r\n        if (isPinMode) {\r\n            // If PIN is provided (or Master PIN), mark attendance directly\r\n            await markAttendanceRequest();\r\n        } else {\r\n            // If no PIN, use Geolocation\r\n             if (!navigator.geolocation) {\r\n                setLoading(false);\r\n                return alert(\"Geolocation is not supported by your browser for attendance.\");\r\n             }\r\n            navigator.geolocation.getCurrentPosition(\r\n                (position) => markAttendanceRequest(position.coords.latitude, position.coords.longitude),\r\n                () => {\r\n                    setLoading(false);\r\n                    alert(\"Could not get your location. Attendance failed.\");\r\n                }\r\n            );\r\n        }\r\n    };\r\n    \r\n    if (loading && !course) return <p>Loading course details...</p>;\r\n    if (!course) return <p>Course not found.</p>;\r\n\r\n    const isInstructorOwner = user.role === 'LECTURER' && course.instructor?.id === user.user_id;\r\n    const isAdmin = user.role === 'ADMIN';\r\n    const isStudent = user.role === 'STUDENT';\r\n\r\n    return (\r\n        <div className=\"bg-white p-8 rounded-xl shadow-2xl space-y-8\">\r\n            {/* Course Header */}\r\n            <div>\r\n                <span className=\"text-base font-semibold text-indigo-600\">{course.code}</span>\r\n                <h1 className=\"text-4xl font-extrabold text-gray-900 mt-1\">{course.name}</h1>\r\n                <p className=\"text-gray-700 text-lg mt-4\">{course.description}</p>\r\n            </div>\r\n\r\n            {/* Course Info Chips */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                <InfoChip label=\"Department\" value={course.department.name} />\r\n                <InfoChip label=\"Credits\" value={course.credits} />\r\n                <InfoChip label=\"Instructor\" value={course.instructor ? `${course.instructor.first_name} ${course.instructor.last_name}` : 'TBD'} />\r\n            </div>\r\n\r\n            {/* Enroll/Schedule Actions */}\r\n            <div className=\"border-t pt-6 flex justify-between items-center\">\r\n                <div>\r\n                    <p className=\"text-2xl font-bold text-gray-900\">{course.seats_left} / {course.capacity}</p>\r\n                    <p className=\"text-sm text-gray-500\">Seats Remaining</p>\r\n                </div>\r\n                {isStudent && !course.is_full && (\r\n                    <button \r\n                        onClick={handleEnroll}\r\n                        disabled={loading}\r\n                        className=\"px-6 py-3 bg-green-600 text-white rounded-lg shadow-lg text-lg font-semibold hover:bg-green-700 disabled:bg-gray-400\"\r\n                    >\r\n                        {loading ? 'Processing...' : 'Enroll Now'}\r\n                    </button>\r\n                )}\r\n                 {(isAdmin || isInstructorOwner) && (\r\n                    <Link \r\n                        to={`/courses/${id}/schedule`}\r\n                        className=\"px-6 py-3 bg-purple-600 text-white rounded-lg shadow-lg text-lg font-semibold hover:bg-purple-700\"\r\n                    >\r\n                        Schedule Lectures\r\n                    </Link>\r\n                )}\r\n            </div>\r\n            \r\n            {/* Lecture List and Attendance Marking (for Students) */}\r\n            {isStudent && (\r\n                 <div className=\"border-t pt-6 space-y-4\">\r\n                     <h2 className=\"text-2xl font-bold text-gray-800\">Upcoming Lectures</h2>\r\n                     {lectures.length === 0 && <p>No lectures scheduled yet.</p>}\r\n                     \r\n                     <div className=\"space-y-3\">\r\n                        <input \r\n                            type=\"text\" \r\n                            value={attendancePin} \r\n                            onChange={(e) => setAttendancePin(e.target.value)}\r\n                            placeholder=\"Enter Attendance PIN (or use location)\"\r\n                            className=\"w-full md:w-1/2 p-2 border border-gray-300 rounded-lg mr-2\"\r\n                        />\r\n                         {lectures.map(lecture => (\r\n                             <div key={lecture.id} className=\"p-4 border rounded-lg bg-gray-50 flex justify-between items-center\">\r\n                                 <div>\r\n                                     <p className=\"font-semibold\">{lecture.scheduled_date} at {lecture.start_time.substring(0, 5)} - {lecture.end_time.substring(0, 5)}</p>\r\n                                     <p className=\"text-sm text-gray-600\">Location: Lat {lecture.location_lat}, Lon {lecture.location_lon}</p>\r\n                                 </div>\r\n                                 <button \r\n                                    onClick={() => handleMarkAttendance(lecture.id)}\r\n                                    disabled={loading}\r\n                                    className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg shadow hover:bg-indigo-700 disabled:bg-gray-400\"\r\n                                >\r\n                                    {loading ? 'Processing...' : 'Mark Attendance'}\r\n                                </button>\r\n                             </div>\r\n                         ))}\r\n                     </div>\r\n                 </div>\r\n             )}\r\n             \r\n             {/* Admin/Instructor Links */}\r\n             {(isAdmin || isInstructorOwner) && (\r\n                 <div className=\"border-t pt-6 flex space-x-4\">\r\n                     <Link \r\n                        to={`/courses/${id}/manage`}\r\n                        className=\"px-6 py-3 bg-blue-600 text-white rounded-lg shadow-lg text-lg font-semibold hover:bg-blue-700\"\r\n                    >\r\n                        Manage Enrollments\r\n                    </Link>\r\n                     <Link \r\n                        to={`/attendance/reports/${id}`}\r\n                        className=\"px-6 py-3 bg-teal-600 text-white rounded-lg shadow-lg text-lg font-semibold hover:bg-teal-700\"\r\n                    >\r\n                        View Attendance Report\r\n                    </Link>\r\n                 </div>\r\n             )}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// --- Student \"My Enrollments\" Page (Existing) ---\r\nconst MyEnrollmentsPage = () => { /* ... MyEnrollmentsPage logic remains the same ... */ };\r\n\r\n// --- Instructor Manage Enrollments Page (Existing) ---\r\nconst ManageEnrollmentsPage = () => { /* ... ManageEnrollmentsPage logic remains the same ... */ };\r\n\r\n// --- Admin Manage Departments Page (CRUD) ---\r\nconst ManageDepartmentsPage = () => { /* ... ManageDepartmentsPage logic remains the same ... */ };\r\n\r\n// --- Create/Edit Course Page (Finalized) ---\r\nconst CreateEditCoursePage = () => { /* ... CreateEditCoursePage logic remains the same ... */ };\r\n\r\n// --- NEW: Lecture Schedule Page (Admin/Instructor) ---\r\nconst LectureSchedulePage = () => {\r\n    const { user, api, loading, setLoading } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [courses, setCourses] = useState([]); // Courses taught by this instructor or all for admin\r\n    const [selectedCourseId, setSelectedCourseId] = useState('');\r\n    const [lectures, setLectures] = useState([]);\r\n    const [formData, setFormData] = useState({\r\n        course: '', scheduled_date: '', start_time: '', end_time: '',\r\n        location_lat: '', location_lon: '', attendance_radius: 100\r\n    });\r\n    const [currentPin, setCurrentPin] = useState(null); // To display generated PIN\r\n\r\n    // Fetch courses based on role\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        const url = user.role === 'ADMIN' ? '/courses/' : '/courses/?instructor=' + user.user_id;\r\n        api.get(url)\r\n            .then(res => {\r\n                const courseData = res.data.results || res.data;\r\n                setCourses(courseData);\r\n                if (courseData.length > 0) {\r\n                    setSelectedCourseId(courseData[0].id); // Select first course by default\r\n                }\r\n            })\r\n            .catch(err => alert(\"Failed to load courses.\"))\r\n            .finally(() => setLoading(false));\r\n    }, [api, setLoading, user]);\r\n\r\n    // Fetch lectures when selected course changes\r\n    useEffect(() => {\r\n        if (!selectedCourseId) return;\r\n        setLoading(true);\r\n        api.get(`/lectures/?course=${selectedCourseId}`)\r\n            .then(res => setLectures(res.data.results || res.data))\r\n            .catch(err => alert(\"Failed to load lectures for this course.\"))\r\n            .finally(() => setLoading(false));\r\n    }, [selectedCourseId, api, setLoading]);\r\n\r\n    const handleFormChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n    \r\n    // Handle lecture creation\r\n    const handleCreateLecture = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        const payload = { ...formData, course: selectedCourseId };\r\n        try {\r\n            await api.post('/lectures/', payload);\r\n            alert('Lecture scheduled successfully!');\r\n            // Refresh lectures for the selected course\r\n            const res = await api.get(`/lectures/?course=${selectedCourseId}`);\r\n            setLectures(res.data.results || res.data);\r\n            // Reset form\r\n            setFormData({\r\n                course: '', scheduled_date: '', start_time: '', end_time: '',\r\n                location_lat: '', location_lon: '', attendance_radius: 100\r\n            });\r\n        } catch (err) {\r\n            console.error(err.response?.data);\r\n            alert(\"Failed to schedule lecture.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n    \r\n    // Generate PIN for a specific lecture\r\n    const handleGeneratePin = async (lectureId) => {\r\n         setLoading(true);\r\n         setCurrentPin('Generating...');\r\n         try {\r\n             const res = await api.post(`/lectures/${lectureId}/generate_pin/`);\r\n             setCurrentPin(res.data.pin);\r\n         } catch (err) {\r\n             setCurrentPin('Error');\r\n             alert(\"Failed to generate PIN.\");\r\n         } finally {\r\n            setLoading(false);\r\n         }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <h1 className=\"text-3xl font-bold text-gray-900\">Schedule Lectures</h1>\r\n\r\n            {/* Course Selection Dropdown */}\r\n            <div className=\"bg-white p-4 rounded-lg shadow\">\r\n                 <label className=\"block text-sm font-medium text-gray-700 mb-1\">Select Course to Manage</label>\r\n                 <select \r\n                    value={selectedCourseId} \r\n                    onChange={(e) => setSelectedCourseId(e.target.value)}\r\n                    className=\"w-full p-2 border border-gray-300 rounded-lg bg-white\"\r\n                    disabled={loading}\r\n                 >\r\n                     <option value=\"\">-- Select Course --</option>\r\n                     {courses.map(c => <option key={c.id} value={c.id}>{c.code} - {c.name}</option>)}\r\n                 </select>\r\n            </div>\r\n\r\n            {/* Create Lecture Form */}\r\n            {selectedCourseId && (\r\n                <div className=\"bg-white p-6 rounded-xl shadow-lg border border-indigo-200\">\r\n                    <h2 className=\"text-xl font-bold mb-4\">Add New Lecture</h2>\r\n                    <form onSubmit={handleCreateLecture} className=\"space-y-4\">\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                            <InputField label=\"Date\" name=\"scheduled_date\" type=\"date\" value={formData.scheduled_date} onChange={handleFormChange} required />\r\n                            <InputField label=\"Start Time\" name=\"start_time\" type=\"time\" value={formData.start_time} onChange={handleFormChange} required />\r\n                            <InputField label=\"End Time\" name=\"end_time\" type=\"time\" value={formData.end_time} onChange={handleFormChange} required />\r\n                        </div>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                            <InputField label=\"Latitude\" name=\"location_lat\" type=\"number\" step=\"any\" value={formData.location_lat} onChange={handleFormChange} placeholder=\"e.g., 34.0522\" required/>\r\n                            <InputField label=\"Longitude\" name=\"location_lon\" type=\"number\" step=\"any\" value={formData.location_lon} onChange={handleFormChange} placeholder=\"e.g., -118.2437\" required/>\r\n                            <InputField label=\"Radius (Meters)\" name=\"attendance_radius\" type=\"number\" value={formData.attendance_radius} onChange={handleFormChange} required />\r\n                        </div>\r\n                        <button type=\"submit\" disabled={loading} className=\"w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400\">\r\n                            {loading ? 'Scheduling...' : 'Schedule Lecture'}\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            )}\r\n            \r\n             {/* List of Scheduled Lectures */}\r\n            <div className=\"bg-white p-6 rounded-xl shadow-lg\">\r\n                <h2 className=\"text-xl font-bold mb-4\">Scheduled Lectures for Selected Course</h2>\r\n                 {loading && lectures.length === 0 && <p>Loading lectures...</p>}\r\n                 {!loading && lectures.length === 0 && <p>No lectures scheduled for this course yet.</p>}\r\n                 <div className=\"space-y-3\">\r\n                     {lectures.map(lec => (\r\n                         <div key={lec.id} className=\"p-4 border rounded-lg bg-gray-50 flex justify-between items-center\">\r\n                             <div>\r\n                                 <p className=\"font-semibold\">{lec.scheduled_date} | {lec.start_time.substring(0,5)} - {lec.end_time.substring(0,5)}</p>\r\n                                 <p className=\"text-sm text-gray-600\">PIN: {lec.attendance_pin || 'Not Generated'} ({lec.is_pin_active ? 'Active' : 'Expired'})</p>\r\n                             </div>\r\n                             <div>\r\n                                 {/* Display current PIN if generated */}\r\n                                 {currentPin && lec.id === parseInt(currentPin.split('-')[1]) && ( // Simple check\r\n                                    <span className=\"font-mono text-lg font-bold mr-4\">{currentPin.split('-')[0]}</span>\r\n                                 )}\r\n                                 <button \r\n                                     onClick={() => handleGeneratePin(lec.id)} \r\n                                     className=\"px-3 py-1 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600\"\r\n                                     disabled={loading}\r\n                                 >\r\n                                     Generate/Show PIN\r\n                                 </button>\r\n                                 {/* TODO: Add Edit/Delete buttons */}\r\n                             </div>\r\n                         </div>\r\n                     ))}\r\n                 </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// --- Attendance Report Page ---\r\nconst AttendanceReportPage = () => {\r\n    const { api, loading, setLoading } = useAuth();\r\n    const [report, setReport] = useState(null);\r\n    const { id } = useParams(); // Course ID from URL\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        api.get(`/attendance/reports/course/${id}/`)\r\n            .then(res => setReport(res.data))\r\n            .catch(err => alert(\"Failed to fetch attendance report.\"))\r\n            .finally(() => setLoading(false));\r\n    }, [id, api, setLoading]);\r\n\r\n    if (loading || !report) return <p>Generating attendance report...</p>;\r\n\r\n    return (\r\n        <div className=\"bg-white p-8 rounded-xl shadow-2xl\">\r\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Attendance Report: {report.course_code}</h1>\r\n            <p className=\"text-xl font-semibold text-indigo-600 mb-6\">Total Sessions Tracked: {report.total_sessions_tracked}</p>\r\n\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead>\r\n                    <tr>\r\n                        <th className=\"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Student Name</th>\r\n                        <th className=\"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Present</th>\r\n                        <th className=\"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Absent</th>\r\n                        <th className=\"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Late</th>\r\n                        <th className=\"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Attendance %</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {report.student_summary.map((stat, index) => (\r\n                        <tr key={index}>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{stat.name}</td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-semibold\">{stat.present}</td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-red-600 font-semibold\">{stat.absent}</td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-yellow-600 font-semibold\">{stat.late}</td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-bold text-indigo-700\">{stat.attendance_percentage}</td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// --- 8. Main App Component (Routing) ---\r\nfunction App() {\r\n    return (\r\n        <BrowserRouter>\r\n            <AuthProvider>\r\n                <Routes>\r\n                    {/* Public Route */}\r\n                    <Route path=\"/auth\" element={<AuthPage />} />\r\n                    \r\n                    {/* Routes inside MainLayout */}\r\n                    <Route\r\n                        path=\"/*\"\r\n                        element={\r\n                            <MainLayout>\r\n                                <Routes>\r\n                                    {/* --- Course & Enrollment Routes --- */}\r\n                                    <Route path=\"/courses\" element={<ProtectedRoute><CoursesListPage /></ProtectedRoute>} />\r\n                                    <Route path=\"/courses/new\" element={<ProtectedRoute roles={['ADMIN', 'LECTURER']}><CreateEditCoursePage /></ProtectedRoute>} />\r\n                                    <Route path=\"/courses/:id\" element={<ProtectedRoute><CourseDetailPage /></ProtectedRoute>} />\r\n                                    <Route path=\"/courses/:id/manage\" element={<ProtectedRoute roles={['ADMIN', 'LECTURER']}><ManageEnrollmentsPage /></ProtectedRoute>} />\r\n                                    <Route path=\"/my-enrollments\" element={<ProtectedRoute roles={['STUDENT']}><MyEnrollmentsPage /></ProtectedRoute>} />\r\n                                    <Route path=\"/manage-departments\" element={<ProtectedRoute roles={['ADMIN']}><ManageDepartmentsPage /></ProtectedRoute>} />\r\n                                    \r\n                                    {/* --- Lecture & Attendance Routes --- */}\r\n                                    <Route \r\n                                        path=\"/courses/:id/schedule\" // Added route for scheduling lectures for a specific course\r\n                                        element={<ProtectedRoute roles={['ADMIN', 'LECTURER']}><LectureSchedulePage /></ProtectedRoute>} \r\n                                    />\r\n                                     <Route \r\n                                        path=\"/schedule-lectures\" // Generic schedule page link\r\n                                        element={<ProtectedRoute roles={['ADMIN', 'LECTURER']}><LectureSchedulePage /></ProtectedRoute>} \r\n                                    />\r\n                                    <Route \r\n                                        path=\"/attendance/reports/:id\" \r\n                                        element={<ProtectedRoute roles={['ADMIN', 'LECTURER']}><AttendanceReportPage /></ProtectedRoute>} \r\n                                    />\r\n\r\n                                    {/* --- Original Core Routes --- */}\r\n                                    <Route path=\"/profile\" element={<ProtectedRoute><ProfilePage /></ProtectedRoute>} />\r\n\r\n                                    {/* Root path redirect */}\r\n                                    <Route path=\"/\" element={<HomeRedirect />} />\r\n                                    {/* 404 Fallback */}\r\n                                    <Route path=\"*\" element={<Navigate to=\"/courses\" replace />} />\r\n                                </Routes>\r\n                            </MainLayout>\r\n                        }\r\n                    />\r\n                </Routes>\r\n            </AuthProvider>\r\n        </BrowserRouter>\r\n    );\r\n}\r\n\r\n// Helper component to redirect logged-in users\r\nconst HomeRedirect = () => {\r\n    const { user } = useAuth();\r\n    if (!user) {\r\n        return <Navigate to=\"/auth\" replace />;\r\n    }\r\n    // All roles default to the courses page\r\n    return <Navigate to=\"/courses\" replace />;\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}